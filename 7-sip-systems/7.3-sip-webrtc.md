## 7.3 SIP 与 WebRTC——信令与媒体的协作体系 {#7-3-sip-webrtc}
在前文中我们了解到，SIP 负责“通话的建立与释放”，而媒体内容（语音、视频）的传输则依赖 RTP 协议。WebRTC（Web Real-Time Communication）正是 RTP 的一个更现代化、面向浏览器的实现。

### 7.3.1 WebRTC 的角色  {#7-3-1-webrtc-role}
    

WebRTC 是一个 **实时媒体传输协议栈**，主要用于在浏览器中实现音视频通信。它本身并不定义信令机制——也就是说，**WebRTC 只负责“怎么传”，不负责“跟谁传”**。信令（例如“我要呼叫谁”“对方是否接听”）由其他协议负责，这正是 SIP 擅长的部分。

在通信建立的过程中，WebRTC 与 SIP 都会使用 SDP（Session Description Protocol，会话描述协议） 来描述媒体参数，比如：

- 双方的 IP 地址与端口；
    
- 使用的音视频编码；
    
- 是否加密传输等。
    

当双方通过某种方式交换 SDP 后（例如通过 SIP 信令），WebRTC 就能建立点对点（Peer Connection）的媒体通道，完成音视频的实时传输。

### 7.3.2 SIP over WebSocket：两者的衔接  {#7-3-2-sip-over-websocket}
    

浏览器环境中无法直接使用 UDP 或 TCP 套接字，因此 **SIP 信令通常通过 WebSocket 进行传输**。这种方式被称为 **SIP over WebSocket**。

换句话说：

- SIP 的信令部分通过 WebSocket 通道进行传输；
    
- SDP 在 SIP 消息中携带；
    
- 媒体部分则由 WebRTC 在 UDP 之上以 RTP 的方式承载。
    

可以理解为：

> SIP 决定“是否发车”，WebSocket 是“调度电话线”，
> 
> 而 WebRTC 则是那辆真正跑在 UDP 轨道上的“高铁”，负责以加密、低延迟的方式传输语音和视频。

### 7.3.3 WebRTC 的安全与传输特性  {#7-3-3-webrtc-security}
    

出于安全考虑，WebRTC 要求所有通信必须加密：

- 信令通道使用 **TLS** 加密（例如 SIP over WebSocket）
    
- 媒体通道使用 **DTLS** 加密（Datagram TLS）
    

此外，WebRTC 还内置了完善的 **回声消除**、**噪声抑制**、**拥塞控制** 等机制，使其在复杂网络环境下也能保持良好的音视频质量。

这使得它不仅适用于浏览器场景，也被广泛编译为 SDK 使用，做成 Native 的 App。脱离了 Web 的 WebRTC 就只好叫 RTC 了。