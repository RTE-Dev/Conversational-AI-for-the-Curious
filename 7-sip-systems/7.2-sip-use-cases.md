## 7.2 SIP 的使用场景 {#7-2-sip-use-cases}
SIP 诞生于运营商体系之中。

在传统电话网络中，通信依赖电路交换，使用 TUP、ISUP 或 ISDN（PRI）等专有协议。随着通信系统逐渐向 IP 化演进，出现了两条重要的分支：

- **H.323**：是 ISUP 和 ISDN 协议向 IP 演进的第一次尝试，使用二进制表示，用二进制协议在 IP 网络上模拟传统电话信令。
    
- **SIP**：在 H.323 的基础上演化而来，参考了 HTTP 协议，改用“文本格式”描述信令，更加互联网化，也更容易理解和扩展。
    

### 7.2.1 运营商网络中的 SIP —— 通话的中转逻辑  {#7-2-1-sip-carrier-network}
    

自 4G 起，VoLTE（Voice over LTE）就使用 SIP 建立语音通话；在 5G 新通话（NR）中，同样采用了 SIP 体系。这意味着，你现在用的手机，在拨打电话时，背后其实正在运行 SIP 协议，只是你看不见它。

在最基础的通信模型中，Alice 与 Bob 可以直接通过各自的 IP 地址建立 SIP 呼叫（例如直接发送 INVITE 消息），实现点对点的通话。

但在真实的电话网络中，手机之间并不能直接这样通信——它们需要一个“中间人”来完成信令转接和会话管理。这个“中间人”就是**电信运营商**，而运营商用于通话转接的设备被称为 **交换机（Switch）**。

![alt text](/image/721-1.png)
![alt text](/image/721-2.png)


### 7.2.2 企业场景下的 SIP —— 从分机到 PBX  {#7-2-2-sip-enterprise}
    

在企业通信中，**Bob** 可能不再是个人，而是公司的某个分机。公司内部通常会部署一套 **PBX（Private Branch eXchange，专用分支交换机）**，它相当于企业的小型电话网络，负责管理内部的所有分机。

- 公司内部的分机之间可以直接通话；
    
- 对外通话则通过 **SIP 中继线（Trunk）** 连接到运营商。
    

“中继线”这个概念其实源自传统电信，SIP 本身并没有物理“线”的概念，它更像是一条逻辑连接，用来汇聚多路通话。

SIP 天然支持多路并发通信，受限的只是设备的处理能力。例如，一台话机只能有一个麦克风，即使同时有多路通话请求，也只能有一路进行，其他通道会处于 **Hold（保持）** 状态。

![alt text](/image/722-1.png)

### 7.2.3 AI 时代的 SIP —— 智能分机与机器人坐席  {#7-2-3-sip-ai-agent}
    

进入 AI 时代后，企业的分机逐渐被 **AI Agent（智能体）** 所取代。这些 AI 语音机器人通过 SIP 接入 PBX 系统，就能完成：

- 自动接听与问候；
    
- 实时语音识别（ASR）与语音合成（TTS）；
    
- 智能应答、转接与对话分析。
    

在这样的架构中，每一个“分机”都可能是一个 AI 智能体，而不是人类坐席。SIP 在这里继续承担“信令控制”的角色，连接 PBX 与语音 AI 系统。

![alt text](/image/723-1.png)

### 7.2.4 SIP 与媒体传输的关系  {#7-2-4-sip-media-transport}
    

需要注意的是，SIP 只负责“信令”部分，也就是通话的建立与释放。

真正传输语音或视频内容的，是通过 **SDP（Session Description Protocol）** 描述、由 **RTP（Real-Time Protocol）** 承载的媒体流。SIP 交换 SDP 信息后，双方即可通过 RTP 建立实时媒体通道。为了保证低延迟，RTP 一般基于 UDP 进行传输。

在其他领域，SIP 的思想也被广泛借鉴：

- **RTSP（Real-Time Streaming Protocol）**：常见于监控与流媒体播放，结构类似 SIP + SDP + RTP；
    
- **GB28181**：中国安防标准协议，在 SIP 基础上扩展了访问控制与云台操作等；
    
- **VoLTE / 5G NR**：移动网络中用于语音与视频通话；
    
- **企业 SIP Server**：通过对接 **SBC（边界网关控制器）** 和 **IMS（多媒体子系统）**，实现公网与企业内部 AI 通话互联。