## 2.4 编排在语音系统中的独特挑战
语音代理的编排难度远高于文本聊天系统，主要体现在以下几个方面：

- **延迟预算极其紧张**：人类在 200 毫秒内就能感知卡顿。电信标准认为单向 150–200 毫秒是自然对话的极限。对话式 AI必须把端到端延迟（麦克风 → STT → LLM → TTS → 扬声器）控制在 1 秒以内。
- **全双工对话**：系统在说话的同时也要监听用户输入。用户插话时，系统必须能立即打断 TTS 并取消正在运行的推理。
- **流式处理与反压控制**：音频数据是逐帧到达的。STT 需要实时输出部分识别结果，TTS 必须流式生成音频片段。整个数据流不能有阻塞。
- **复杂的中断语义**：打断不仅仅意味着“停止播放”，还包括取消 LLM 推理、清空 TTS 缓冲、重置状态机。
- **边缘环境的不确定性**：设备噪声、网络抖动、带宽限制都会影响编排逻辑。系统需要决定哪些任务在本地执行，哪些放在云端。